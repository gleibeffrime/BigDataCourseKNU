# Лабораторна робота No 3. Зчитування даних з WEB.
В цій лабораторній роботі необхідно зчитати WEB сторінку з сайту IMDB.com зі 100 фільмами 2017 року виходу за посиланням «http://www.imdb.com/search/title?count=100&release_date=2017,2017&title_ty pe=feature». Необхідно створити data.frame «movies» з наступними даними: номер фільму (rank_data), назва фільму (title_data), тривалість (runtime_data). Для виконання лабораторної рекомендується використати бібліотеку «rvest». CSS селектори для зчитування необхідних даних: rank_data: «.text-primary», title_data: «.lister-item-header a», runtime_data: «.text-muted .runtime». Для зчитування url використовується функція read_html, для зчитування даних по CSS селектору – html_nodes і для перетворення зчитаних html даних в текст - html_text. Рекомендується перетворити rank_data та runtime_data з тексту в числові значення. При формуванні дата фрейму функцією data.frame рекомендується використати параметр «stringsAsFactors = FALSE».
```r
library(rvest)

htmlPageUrl <- "http://www.imdb.com/search/title?count=100&release_date=2017,2017&title_type=feature"

htmlPage = read_html(htmlPageUrl)

rank_data_selector <- ".text-primary"
title_data_selector <- ".lister-item-header a"
runtime_data_selector <- ".text-muted .runtime"

getDataBySelector <- function(selector) {
  selectedData <- html_text(html_nodes(htmlPage, selector))
  return(selectedData)
}

rank_data <- as.numeric(getDataBySelector(rank_data_selector))
title_data <- getDataBySelector(title_data_selector)
runtime_data <- as.numeric(gsub(" min", "", getDataBySelector(runtime_data_selector)))

movies <- data.frame(rank = rank_data, title = title_data, runtime = runtime_data, stringsAsFactors = FALSE)
movies
```
```
    rank                                    title runtime
1      1                                На драйві     113
2      2                            Тор: Раґнарок     130
3      3             Той, хто біжить по лезу 2049     164
4      4                      Вартові Галактики 2     136
5      5               Король Артур: Легенда меча     126
6      6       Три білборди під Еббінґом, Міссурі     115
7      7          Людина-павук: Повернення додому     133
8      8                     Найвеличніший шоумен     105
9      9                      Ліга справедливості     120
10    10                                     Воно     135
11    11                     Тілоохоронець кілера     118
12    12                                  Дюнкерк     106
13    13                               Диво-жінка     141
14    14                   Назви мене своїм ім'ям     132
15    15                                   Пастка     104
16    16                                     Диво     113
17    17               Джуманджі: Поклик джунглів     119
18    18                                   Пила 8      92
19    19                      Конг: Острів черепа     118
20    20                      Рятувальники Малібу     116
21    21                               Форма води     123
22    22                                  Я, Тоня     119
23    23                          Логан: Росомаха     137
24    24                     Красуня і Чудовисько     129
25    25                             Вітряна ріка     107
26    26                                     Коко     105
27    27                               Темні часи     125
28    28                           Чужий: Заповіт     122
29    29  Зоряні війни: Епізод 8 - Останні Джедаї     152
30    30                                 Форсаж 8     136
31    31             Вбивство у Східному експресі     114
32    32                             Горе-творець     104
33    33                  Kingsman: Золоте кільце     141
34    34 Пірати Карибського моря: Помста Салазара     129
35    35                                    Мати!     121
36    36                               Джон Вік 2     122
37    37                Вбивство священного оленя     121
38    38                                  Метелик     133
39    39                                    Життя     104
40    40                               Леді Бьорд      94
41    41                     Американський убивця     111
42    42                          Історія примари      92
43    43                                   Нянька      85
44    44           Валеріан і місто тисячі планет     136
45    45                               Гарні часи     102
46    46                           Примарна нитка     130
47    47                             Удача Лоґана     118
48    48                     Тюльпанова лихоманка     105
49    49                                Гра Моллі     140
50    50                           Смерть Сталіна     107
51    51                                    Мумія     111
52    52                                 Геошторм     109
53    53               Дружина доглядача зоопарку     127
54    54            Баррі Сіл: Король контрабанди     115
55    55                               Обдарована     101
56    56                        1+1: Нова історія     126
57    57                            Гра Джеральда     103
58    58             Трансформери: Останній лицар     154
59    59                        Постріл в безодню     121
60    60                    Війна за планету мавп     140
61    61                                   Ритуал      94
62    62                          The Current War     108
63    63              П'ятдесят відтінків темряви     118
64    64                    Пригоди Паддінгтона 2     103
65    65                                    Сфера     110
66    66                               Сім сестер     123
67    67         Каліфорнійський дорожній патруль     100
68    68                        Ідеальний голос 3      93
69    69                                Sleepless      95
70    70                               Темна вежа      95
71    71                           Дух в оболонці     107
72    72                                Фердинанд     108
73    73                                 Сніговик     119
74    74                         Атомна Блондинка     115
75    75                                  Яскраві     117
76    76                         Проект 'Флорида'     111
77    77                            Таємний агент      98
78    78                      Берлінський синдром     116
79    79                Saban's Могутні рейнджери     124
80    80                                     Окча     120
81    81                        Кримінальне місто     121
82    82                                   Помста     108
83    83                             Disobedience     114
84    84                                Іноземець     113
85    85                           Секретне досьє     116
86    86                         Фатальна спокуса      93
87    87                             Матриця часу      98
88    88                  Тебе ніколи тут не було      89
89    89                                  Тачки 3     102
90    90                       Анабель: Створення     109
91    91                                     1922     102
92    92                         Кривий будиночок     115
93    93                                   Вороги     134
94    94                                    Дихай     118
95    95                          Усі гроші світу     132
96    96                             Зошит смерті     101
97    97                                  Новизна     117
98    98                                     HHhH     120
99    99                                  Забутий     108
100  100                                  Наїзник     104
```

В результаті виконання лабораторної роботи необхідно відповісти на запитання:
1. Виведіть перші 6 назв фільмів дата фрейму.
```r
head(movies$title, 6)
```
```
[1] "На драйві"                          "Тор: Раґнарок"                     
[3] "Той, хто біжить по лезу 2049"       "Вартові Галактики 2"               
[5] "Король Артур: Легенда меча"         "Три білборди під Еббінґом, Міссурі"
```
2. Виведіть всі назви фільмів з тривалістю більше 120хв.
```r
movies[movies$runtime > 120, ]$title
```
```
 [1] "Тор: Раґнарок"                           
 [2] "Той, хто біжить по лезу 2049"            
 [3] "Вартові Галактики 2"                     
 [4] "Король Артур: Легенда меча"              
 [5] "Людина-павук: Повернення додому"         
 [6] "Воно"                                    
 [7] "Диво-жінка"                              
 [8] "Назви мене своїм ім'ям"                  
 [9] "Форма води"                              
[10] "Логан: Росомаха"                         
[11] "Красуня і Чудовисько"                    
[12] "Темні часи"                              
[13] "Чужий: Заповіт"                          
[14] "Зоряні війни: Епізод 8 - Останні Джедаї" 
[15] "Форсаж 8"                                
[16] "Kingsman: Золоте кільце"                 
[17] "Пірати Карибського моря: Помста Салазара"
[18] "Мати!"                                   
[19] "Джон Вік 2"                              
[20] "Вбивство священного оленя"               
[21] "Метелик"                                 
[22] "Валеріан і місто тисячі планет"          
[23] "Примарна нитка"                          
[24] "Гра Моллі"                               
[25] "Дружина доглядача зоопарку"              
[26] "1+1: Нова історія"                       
[27] "Трансформери: Останній лицар"            
[28] "Постріл в безодню"                       
[29] "Війна за планету мавп"                   
[30] "Сім сестер"                              
[31] "Saban's Могутні рейнджери"               
[32] "Кримінальне місто"                       
[33] "Вороги"                                  
[34] "Усі гроші світу"    
```
3. Скільки фільмів мають тривалість менше 100хв.
```r
nrow(movies[which(movies$runtime < 100),])
```
```
[1] 12
```
